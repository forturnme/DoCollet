<!DOCTYPE html>
<html dir="ltr" mozdisallowselectionprint="">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="google" content="notranslate">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>阅读</title>
    <link rel="stylesheet" href="./src/viewer.css">
    <!-- This snippet is used in production (included from viewer.html) -->
    <link rel="resource" type="application/l10n" href="http://mozilla.github.io/pdf.js/web/locale/locale.properties">
    <script type="text/javascript" src="./src/jquery-3.4.0.min.js"></script>
    <script src="./src/load.js"></script>
    <!-- <script src="./src/getpdfroute.js"></script> -->
    <script src="./src/pdf.js"></script>
    <script src="./src/viewer.js"></script>
  </head>

  <body tabindex="1" class="">
    <div id="outerContainer">
      <div id="sidebarContainer">
        <div id="toolbarSidebar">
          <div class="splitToolbarButton toggled">
            <button id="viewThumbnail" class="toolbarButton toggled" title="显示缩略图" tabindex="2" data-l10n-id="thumbs">
               <span data-l10n-id="thumbs_label">缩略图</span>
            </button>
            <button id="viewOutline" class="toolbarButton" title="显示文档大纲（双击展开/折叠所有项）" tabindex="3" data-l10n-id="document_outline" disabled="">
               <span data-l10n-id="document_outline_label">文档大纲</span>
            </button>
            <button id="viewAttachments" class="toolbarButton" title="显示附件" tabindex="4" data-l10n-id="attachments" disabled="">
               <span data-l10n-id="attachments_label">附件</span>
            </button>
          </div>
        </div>
        <div id="sidebarContent">
          <div id="thumbnailView"></div>
          <div id="outlineView" class="hidden"></div>
          <div id="attachmentsView" class="hidden"></div>
        </div>
        <div id="sidebarResizer" class=""></div>
      </div>  <!-- sidebarContainer -->

      <div id="mainContainer">
        <div class="findbar hidden doorHanger" id="findbar">
          <div id="findbarInputContainer">
            <input id="findInput" class="toolbarField" title="查找" placeholder="在文档中查找…" tabindex="91" data-l10n-id="find_input">
            <div class="splitToolbarButton">
              <button id="findPrevious" class="toolbarButton findPrevious" title="查找词语上一次出现的位置" tabindex="92" data-l10n-id="find_previous">
                <span data-l10n-id="find_previous_label">上一页</span>
              </button>
              <div class="splitToolbarButtonSeparator"></div>
              <button id="findNext" class="toolbarButton findNext" title="查找词语后一次出现的位置" tabindex="93" data-l10n-id="find_next">
                <span data-l10n-id="find_next_label">下一页</span>
              </button>
            </div>
          </div>

          <div id="findbarOptionsOneContainer">
            <input type="checkbox" id="findHighlightAll" class="toolbarField" tabindex="94">
            <label for="findHighlightAll" class="toolbarLabel" data-l10n-id="find_highlight">全部高亮显示</label>
            <input type="checkbox" id="findMatchCase" class="toolbarField" tabindex="95">
            <label for="findMatchCase" class="toolbarLabel" data-l10n-id="find_match_case_label">区分大小写</label>
          </div>
          <div id="findbarOptionsTwoContainer">
            <input type="checkbox" id="findEntireWord" class="toolbarField" tabindex="96">
            <label for="findEntireWord" class="toolbarLabel" data-l10n-id="find_entire_word_label">字词匹配</label>
            <span id="findResultsCount" class="toolbarLabel hidden"></span>
          </div>

          <div id="findbarMessageContainer">
            <span id="findMsg" class="toolbarLabel"></span>
          </div>
        </div>  <!-- findbar -->

        <div id="secondaryToolbar" class="secondaryToolbar hidden doorHangerRight">
          <div id="secondaryToolbarButtonContainer">
            <button id="secondaryPresentationMode" class="secondaryToolbarButton presentationMode visibleLargeView" title="切换到演示模式" tabindex="51" data-l10n-id="presentation_mode">
              <span data-l10n-id="presentation_mode_label">演示模式</span>
            </button>

            <button id="secondaryOpenFile" class="secondaryToolbarButton openFile visibleLargeView" title="打开文件" tabindex="52" data-l10n-id="open_file">
              <span data-l10n-id="open_file_label">打开</span>
            </button>

            <button id="secondaryPrint" class="secondaryToolbarButton print visibleMediumView" title="打印" tabindex="53" data-l10n-id="print">
              <span data-l10n-id="print_label">打印</span>
            </button>

            <button id="secondaryDownload" class="secondaryToolbarButton download visibleMediumView" title="下载" tabindex="54" data-l10n-id="download">
              <span data-l10n-id="download_label">下载</span>
            </button>

            <a href="http://mozilla.github.io/pdf.js/web/viewer.html#page=1&amp;zoom=auto,-105,597" id="secondaryViewBookmark" class="secondaryToolbarButton bookmark visibleSmallView" title="当前在看的内容（复制或在新窗口中打开）" tabindex="55" data-l10n-id="bookmark">
              <span data-l10n-id="bookmark_label">当前在看</span>
            </a>

            <div class="horizontalToolbarSeparator visibleLargeView"></div>

            <button id="firstPage" class="secondaryToolbarButton firstPage" title="转到第一页" tabindex="56" data-l10n-id="first_page" disabled="">
              <span data-l10n-id="first_page_label">转到第一页</span>
            </button>
            <button id="lastPage" class="secondaryToolbarButton lastPage" title="转到最后一页" tabindex="57" data-l10n-id="last_page">
              <span data-l10n-id="last_page_label">转到最后一页</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="pageRotateCw" class="secondaryToolbarButton rotateCw" title="顺时针旋转" tabindex="58" data-l10n-id="page_rotate_cw">
              <span data-l10n-id="page_rotate_cw_label">顺时针旋转</span>
            </button>
            <button id="pageRotateCcw" class="secondaryToolbarButton rotateCcw" title="逆时针旋转" tabindex="59" data-l10n-id="page_rotate_ccw">
              <span data-l10n-id="page_rotate_ccw_label">逆时针旋转</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="cursorSelectTool" class="secondaryToolbarButton selectTool toggled" title="启用文本选择工具" tabindex="60" data-l10n-id="cursor_text_select_tool">
              <span data-l10n-id="cursor_text_select_tool_label">文本选择工具</span>
            </button>
            <button id="cursorHandTool" class="secondaryToolbarButton handTool" title="启用手形工具" tabindex="61" data-l10n-id="cursor_hand_tool">
              <span data-l10n-id="cursor_hand_tool_label">手形工具</span>
            </button>

            <div class="horizontalToolbarSeparator"></div>

            <button id="scrollVertical" class="secondaryToolbarButton scrollModeButtons scrollVertical toggled" title="使用垂直滚动" tabindex="62" data-l10n-id="scroll_vertical">
              <span data-l10n-id="scroll_vertical_label">垂直滚动</span>
            </button>
            <button id="scrollHorizontal" class="secondaryToolbarButton scrollModeButtons scrollHorizontal" title="使用水平滚动" tabindex="63" data-l10n-id="scroll_horizontal">
              <span data-l10n-id="scroll_horizontal_label">水平滚动</span>
            </button>
            <button id="scrollWrapped" class="secondaryToolbarButton scrollModeButtons scrollWrapped" title="使用平铺滚动" tabindex="64" data-l10n-id="scroll_wrapped">
              <span data-l10n-id="scroll_wrapped_label">平铺滚动</span>
            </button>

            <div class="horizontalToolbarSeparator scrollModeButtons"></div>

            <button id="spreadNone" class="secondaryToolbarButton spreadModeButtons spreadNone toggled" title="不加入衔接页" tabindex="65" data-l10n-id="spread_none">
              <span data-l10n-id="spread_none_label">单页视图</span>
            </button>
            <button id="spreadOdd" class="secondaryToolbarButton spreadModeButtons spreadOdd" title="加入衔接页使奇数页作为起始页" tabindex="66" data-l10n-id="spread_odd">
              <span data-l10n-id="spread_odd_label">双页视图</span>
            </button>
            <button id="spreadEven" class="secondaryToolbarButton spreadModeButtons spreadEven" title="加入衔接页使偶数页作为起始页" tabindex="67" data-l10n-id="spread_even">
              <span data-l10n-id="spread_even_label">书籍视图</span>
            </button>

            <div class="horizontalToolbarSeparator spreadModeButtons"></div>

            <button id="documentProperties" class="secondaryToolbarButton documentProperties" title="文档属性…" tabindex="68" data-l10n-id="document_properties">
              <span data-l10n-id="document_properties_label">文档属性…</span>
            </button>
          </div>
        </div>  <!-- secondaryToolbar -->

        <div class="toolbar">
          <div id="toolbarContainer">
            <div id="toolbarViewer">
              <div id="toolbarViewerLeft">
                <button id="sidebarToggle" class="toolbarButton" title="切换侧栏" tabindex="11" data-l10n-id="toggle_sidebar">
                  <span data-l10n-id="toggle_sidebar_label">切换侧栏</span>
                </button>
                <div class="toolbarButtonSpacer"></div>
                <button id="viewFind" class="toolbarButton" title="在文档中查找" tabindex="12" data-l10n-id="findbar">
                  <span data-l10n-id="findbar_label">查找</span>
                </button>
                <div class="splitToolbarButton hiddenSmallView">
                  <button class="toolbarButton pageUp" title="上一页" id="previous" tabindex="13" data-l10n-id="previous" disabled="">
                    <span data-l10n-id="previous_label">上一页</span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button class="toolbarButton pageDown" title="下一页" id="next" tabindex="14" data-l10n-id="next">
                    <span data-l10n-id="next_label">下一页</span>
                  </button>
                </div>
                <input type="number" id="pageNumber" class="toolbarField pageNumber" title="页面" value="1" size="4" min="1" tabindex="15" data-l10n-id="page" max="14">
                <span id="numPages" class="toolbarLabel">/ 14</span>
              </div>
              <div id="toolbarViewerRight">
                <button id="presentationMode" class="toolbarButton presentationMode hiddenLargeView" title="切换到演示模式" tabindex="31" data-l10n-id="presentation_mode">
                  <span data-l10n-id="presentation_mode_label">演示模式</span>
                </button>

                <button id="openFile" class="toolbarButton openFile hiddenLargeView" title="打开文件" tabindex="32" data-l10n-id="open_file">
                  <span data-l10n-id="open_file_label">打开</span>
                </button>

                <button id="print" class="toolbarButton print hiddenMediumView" title="打印" tabindex="33" data-l10n-id="print">
                  <span data-l10n-id="print_label">打印</span>
                </button>

                <button id="download" class="toolbarButton download hiddenMediumView" title="下载" tabindex="34" data-l10n-id="download">
                  <span data-l10n-id="download_label">下载</span>
                </button>
                <a href="http://mozilla.github.io/pdf.js/web/viewer.html#page=1&amp;zoom=auto,-105,597" id="viewBookmark" class="toolbarButton bookmark hiddenSmallView" title="当前在看的内容（复制或在新窗口中打开）" tabindex="35" data-l10n-id="bookmark">
                  <span data-l10n-id="bookmark_label">当前在看</span>
                </a>

                <div class="verticalToolbarSeparator hiddenSmallView"></div>

                <button id="secondaryToolbarToggle" class="toolbarButton" title="工具" tabindex="36" data-l10n-id="tools">
                  <span data-l10n-id="tools_label">工具</span>
                </button>
              </div>
              <div id="toolbarViewerMiddle">
                <div class="splitToolbarButton">
                  <button id="zoomOut" class="toolbarButton zoomOut" title="缩小" tabindex="21" data-l10n-id="zoom_out">
                    <span data-l10n-id="zoom_out_label">缩小</span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button id="zoomIn" class="toolbarButton zoomIn" title="放大" tabindex="22" data-l10n-id="zoom_in">
                    <span data-l10n-id="zoom_in_label">放大</span>
                   </button>
                </div>
                <span id="scaleSelectContainer" class="dropdownToolbarButton" style="min-width: 82px; max-width: 82px;">
                  <select id="scaleSelect" title="缩放" tabindex="23" data-l10n-id="zoom" style="min-width: 104px;">
                    <option id="pageAutoOption" title="" value="auto" selected="selected" data-l10n-id="page_scale_auto">自动缩放</option>
                    <option id="pageActualOption" title="" value="page-actual" data-l10n-id="page_scale_actual">实际大小</option>
                    <option id="pageFitOption" title="" value="page-fit" data-l10n-id="page_scale_fit">适合页面</option>
                    <option id="pageWidthOption" title="" value="page-width" data-l10n-id="page_scale_width">适合页宽</option>
                    <option id="customScaleOption" title="" value="custom" disabled="disabled" hidden="true"></option>
                    <option title="" value="0.5" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 50 }">50%</option>
                    <option title="" value="0.75" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 75 }">75%</option>
                    <option title="" value="1" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 100 }">100%</option>
                    <option title="" value="1.25" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 125 }">125%</option>
                    <option title="" value="1.5" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 150 }">150%</option>
                    <option title="" value="2" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 200 }">200%</option>
                    <option title="" value="3" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 300 }">300%</option>
                    <option title="" value="4" data-l10n-id="page_scale_percent" data-l10n-args="{ &quot;scale&quot;: 400 }">400%</option>
                  </select>
                </span>
              </div>
            </div>
            <div id="loadingBar" class="hidden">
              <div class="progress" style="height: 100%; width: 100%;">
                <div class="glimmer">
                </div>
              </div>
            </div>
          </div>
        </div>

        <menu type="context" id="viewerContextMenu">
          <menuitem id="contextFirstPage" label="First Page" data-l10n-id="first_page" title="转到第一页"></menuitem>
          <menuitem id="contextLastPage" label="Last Page" data-l10n-id="last_page" title="转到最后一页"></menuitem>
          <menuitem id="contextPageRotateCw" label="Rotate Clockwise" data-l10n-id="page_rotate_cw" title="顺时针旋转"></menuitem>
          <menuitem id="contextPageRotateCcw" label="Rotate Counter-Clockwise" data-l10n-id="page_rotate_ccw" title="逆时针旋转"></menuitem>
        </menu>

        <div id="viewerContainer" tabindex="0">
          <div id="viewer" class="pdfViewer"><div class="page" data-page-number="1" data-loaded="true" style="width: 1019px; height: 1319px;"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page1" width="2040" height="2640" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 134.193px; top: 131.593px; font-size: 29.888px; font-family: sans-serif; transform: scaleX(0.904411);">Trace-based Just-in-Time Type Specialization for Dynamic</span><span style="left: 439.51px; top: 164.802px; font-size: 29.888px; font-family: sans-serif; transform: scaleX(0.893927);">Languages</span><span style="left: 200.537px; top: 232.817px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.869373);">Andreas Gal</span><span style="left: 292.3355px; top: 228.63970833333303px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 300.22266666666667px; top: 229.38358433333303px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 312.03px; top: 232.817px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.882593);">, Brendan Eich</span><span style="left: 421.08883333333335px; top: 228.63970833333303px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 428.976px; top: 232.817px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.873152);">, Mike Shaver</span><span style="left: 531.1306666666667px; top: 228.63970833333303px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 539.018px; top: 232.817px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.861325);">, David Anderson</span><span style="left: 668.0033333333333px; top: 228.63970833333303px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 675.89px; top: 232.817px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.86753);">, David Mandelin</span><span style="left: 803.8711666666667px; top: 228.63970833333303px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 811.7583333333333px; top: 232.81677633333322px; font-size: 18.264833333333332px; font-family: sans-serif;">,</span><span style="left: 155.903px; top: 254.402px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.842851);">Mohammad R. Haghighat</span><span style="left: 346.14766666666674px; top: 250.96925099999987px; font-size: 13.2835px; font-family: sans-serif;">$</span><span style="left: 354.035px; top: 254.402px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.896379);">, Blake Kaplan</span><span style="left: 462.91050000000007px; top: 250.22537499999987px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 470.798px; top: 254.402px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.853496);">, Graydon Hoare</span><span style="left: 593.0253333333335px; top: 250.22537499999987px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 600.913px; top: 254.402px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.891029);">, Boris Zbarsky</span><span style="left: 713.7700000000001px; top: 250.22537499999987px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 721.657px; top: 254.402px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.844391);">, Jason Orendorff</span><span style="left: 848.5055000000001px; top: 250.22537499999987px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 856.3926666666667px; top: 254.40244299999983px; font-size: 18.264833333333332px; font-family: sans-serif;">,</span><span style="left: 113.792px; top: 275.988px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.838836);">Jesse Ruderman</span><span style="left: 231.9818333333335px; top: 271.8110416666665px; font-size: 13.2835px; font-family: monospace;">∗</span><span style="left: 239.869px; top: 275.988px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.890153);">, Edwin Smith</span><span style="left: 344.90916666666686px; top: 272.5549176666665px; font-size: 13.2835px; font-family: sans-serif;">#</span><span style="left: 357.501px; top: 275.988px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.894506);">, Rick Reitmaier</span><span style="left: 477.7366666666669px; top: 272.5549176666665px; font-size: 13.2835px; font-family: sans-serif;">#</span><span style="left: 490.329px; top: 275.988px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.863036);">, Michael Bebenita</span><span style="left: 628.8106666666669px; top: 272.5549176666665px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 640.619px; top: 275.988px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.848573);">, Mason Chang</span><span style="left: 751.723px; top: 272.555px; font-size: 13.2835px; font-family: sans-serif; transform: scaleX(1.28596);">+#</span><span style="left: 776.122px; top: 275.988px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.881563);">, Michael Franz</span><span style="left: 891.2625px; top: 272.5549176666665px; font-size: 13.2835px; font-family: sans-serif;">+</span><span style="left: 443.609px; top: 303.146px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.859357);">Mozilla Corporation</span><span style="left: 566.0578333333334px; top: 299.45799999999986px; font-size: 9.962666666666665px; font-family: monospace;">∗</span><span style="left: 151.62716666666677px; top: 318.67466666666667px; font-size: 14.943999999999999px; font-family: sans-serif;">{</span><span style="left: 159.307px; top: 320.752px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05026);">gal,brendan,shaver,danderson,dmandelin,mrbkap,graydon,bz,jorendorff,jruderman</span><span style="left: 763.4091666666667px; top: 318.67466666666667px; font-size: 14.943999999999999px; font-family: sans-serif;">}</span><span style="left: 771.089px; top: 320.752px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">@mozilla.com</span><span style="left: 445.135px; top: 346.716px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.836409);">Adobe Corporation</span><span style="left: 560.9345000000002px; top: 343.58574266666665px; font-size: 9.962666666666665px; font-family: sans-serif;">#</span><span style="left: 394.8373333333335px; top: 362.24450000000013px; font-size: 14.943999999999999px; font-family: sans-serif;">{</span><span style="left: 402.517px; top: 364.322px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">edwsmith,rreitmai</span><span style="left: 535.8901666666668px; top: 362.24450000000013px; font-size: 14.943999999999999px; font-family: sans-serif;">}</span><span style="left: 543.57px; top: 364.322px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">@adobe.com</span><span style="left: 453.296px; top: 390.839px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.843822);">Intel Corporation</span><span style="left: 556.6473333333334px; top: 387.7090760000001px; font-size: 9.962666666666665px; font-family: sans-serif;">$</span><span style="left: 383.06916666666683px; top: 406.36783333333346px; font-size: 14.943999999999999px; font-family: sans-serif;">{</span><span style="left: 390.749px; top: 408.445px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">mohammad.r.haghighat</span><span style="left: 547.6583333333334px; top: 406.36783333333346px; font-size: 14.943999999999999px; font-family: sans-serif;">}</span><span style="left: 555.338px; top: 408.445px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">@intel.com</span><span style="left: 410.273px; top: 433.856px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.887034);">University of California, Irvine</span><span style="left: 596.4423333333335px; top: 430.7254093333336px; font-size: 9.962666666666665px; font-family: sans-serif;">+</span><span style="left: 386.99183333333355px; top: 449.38416666666706px; font-size: 14.943999999999999px; font-family: sans-serif;">{</span><span style="left: 394.671px; top: 451.461px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">mbebenit,changm,franz</span><span style="left: 559.4265000000001px; top: 449.38416666666706px; font-size: 14.943999999999999px; font-family: sans-serif;">}</span><span style="left: 567.106px; top: 451.461px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">@uci.edu</span><span style="left: 90px; top: 560.899px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.933688);">Abstract</span><span style="left: 90px; top: 586.616px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.863859);">Dynamic languages such as JavaScript are more difficult to com-</span><span style="left: 90px; top: 603.221px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.843296);">pile than statically typed ones. Since no concrete type information</span><span style="left: 90px; top: 619.825px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.815573);">is available, traditional compilers need to emit generic code that can</span><span style="left: 90px; top: 636.429px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.823652);">handle all possible type combinations at runtime. We present an al-</span><span style="left: 90px; top: 653.034px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.853107);">ternative compilation technique for dynamically-typed languages</span><span style="left: 90px; top: 669.638px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.825806);">that identifies frequently executed loop traces at run-time and then</span><span style="left: 90px; top: 686.243px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.871619);">generates machine code on the fly that is specialized for the ac-</span><span style="left: 90px; top: 702.847px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.853507);">tual dynamic types occurring on each path through the loop. Our</span><span style="left: 90px; top: 719.451px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.822424);">method provides cheap inter-procedural type specialization, and an</span><span style="left: 90px; top: 736.056px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.846655);">elegant and efficient way of incrementally compiling lazily discov-</span><span style="left: 90px; top: 752.66px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.822994);">ered alternative paths through nested loops. We have implemented</span><span style="left: 90px; top: 769.265px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.845397);">a dynamic compiler for JavaScript based on our technique and we</span><span style="left: 90px; top: 785.869px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.854575);">have measured speedups of 10x and more for certain benchmark</span><span style="left: 90px; top: 802.473px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.826936);">programs.</span><span style="left: 90px; top: 828.331px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.887809);">Categories and Subject Descriptors</span><span style="left: 327.581px; top: 828.48px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.967791);">D.3.4 [</span><span style="left: 371.618px; top: 828.63px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.868355);">Programming Lan-</span><span style="left: 90px; top: 845.234px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.808896);">guages</span><span style="left: 132.037px; top: 845.085px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.869222);">]: Processors —</span><span style="left: 231.234px; top: 845.234px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.837565);">Incremental compilers, code generation</span><span style="left: 469.2140000000002px; top: 845.084634666667px; font-size: 14.943999999999999px; font-family: sans-serif;">.</span><span style="left: 90px; top: 870.942px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.894134);">General Terms</span><span style="left: 197.293px; top: 871.091px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.856894);">Design, Experimentation, Measurement, Perfor-</span><span style="left: 90px; top: 887.696px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.837577);">mance.</span><span style="left: 90px; top: 913.553px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.853473);">Keywords</span><span style="left: 164.121px; top: 913.703px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.843863);">JavaScript, just-in-time compilation, trace trees.</span><span style="left: 90px; top: 948.862px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.974443);">1.  Introduction</span><span style="left: 90px; top: 974.728px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.845435);">Dynamic languages</span><span style="left: 211.707px; top: 974.579px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.832893);">such as JavaScript, Python, and Ruby, are pop-</span><span style="left: 90px; top: 991.183px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.835851);">ular since they are expressive, accessible to non-experts, and make</span><span style="left: 90px; top: 1007.79px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.845449);">deployment as easy as distributing a source file. They are used for</span><span style="left: 90px; top: 1024.39px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.890559);">small scripts as well as for complex applications. JavaScript, for</span><span style="left: 90px; top: 1041px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.833466);">example, is the de facto standard for client-side web programming</span><span style="left: 90px; top: 1112.51px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.842428);">Permission to make digital or hard copies of all or part of this work for personal or</span><span style="left: 90px; top: 1125.79px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.803646);">classroom use is granted without fee provided that copies are not made or distributed</span><span style="left: 90px; top: 1139.08px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.794734);">for profit or commercial advantage and that copies bear this notice and the full citation</span><span style="left: 90px; top: 1152.36px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.807798);">on the first page. To copy otherwise, to republish, to post on servers or to redistribute</span><span style="left: 90px; top: 1165.64px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.810716);">to lists, requires prior specific permission and/or a fee.</span><span style="left: 90px; top: 1182.25px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.802192);">PLDI’09,</span><span style="left: 146.046px; top: 1182.25px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.841082);">June 15–20, 2009, Dublin, Ireland.</span><span style="left: 90px; top: 1195.53px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.825284);">Copyright</span><span style="left: 143.97083333333356px; top: 1195.1804393333337px; font-size: 11.623px; font-family: sans-serif;">c</span><span style="left: 139.93233333333356px; top: 1194.693916666667px; font-size: 11.623px; font-family: monospace;">©</span><span style="left: 156.076px; top: 1195.53px; font-size: 11.623px; font-family: sans-serif; transform: scaleX(0.816441);">2009 ACM 978-1-60558-392-1/09/06. . . $5.00</span><span style="left: 528.356px; top: 563.37px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.83612);">and is used for the application logic of browser-based productivity</span><span style="left: 528.356px; top: 579.974px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.874717);">applications such as Google Mail, Google Docs and Zimbra Col-</span><span style="left: 528.356px; top: 596.579px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.883359);">laboration Suite. In this domain, in order to provide a fluid user</span><span style="left: 528.356px; top: 613.183px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.820781);">experience and enable a new generation of applications, virtual ma-</span><span style="left: 528.356px; top: 629.788px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.829277);">chines must provide a low startup time and high performance.</span><span style="left: 548.282px; top: 646.392px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.855113);">Compilers for statically typed languages rely on type informa-</span><span style="left: 528.356px; top: 662.996px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.818947);">tion to generate efficient machine code. In a dynamically typed pro-</span><span style="left: 528.356px; top: 679.601px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.869358);">gramming language such as JavaScript, the types of expressions</span><span style="left: 528.356px; top: 696.205px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.862318);">may vary at runtime. This means that the compiler can no longer</span><span style="left: 528.356px; top: 712.81px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.841957);">easily transform operations into machine instructions that operate</span><span style="left: 528.356px; top: 729.414px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.83995);">on one specific type. Without exact type information, the compiler</span><span style="left: 528.356px; top: 746.018px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.852481);">must emit slower generalized machine code that can deal with all</span><span style="left: 528.356px; top: 762.623px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.844717);">potential type combinations. While compile-time static type infer-</span><span style="left: 528.356px; top: 779.227px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.867012);">ence might be able to gather type information to generate opti-</span><span style="left: 528.356px; top: 795.832px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.873975);">mized machine code, traditional static analysis is very expensive</span><span style="left: 528.356px; top: 812.436px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.833568);">and hence not well suited for the highly interactive environment of</span><span style="left: 528.356px; top: 829.04px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.829231);">a web browser.</span><span style="left: 548.282px; top: 845.645px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.863551);">We present a trace-based compilation technique for dynamic</span><span style="left: 528.356px; top: 862.249px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.838713);">languages that reconciles speed of compilation with excellent per-</span><span style="left: 528.356px; top: 878.854px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.814746);">formance of the generated machine code. Our system uses a mixed-</span><span style="left: 528.356px; top: 895.458px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.825931);">mode execution approach: the system starts running JavaScript in a</span><span style="left: 528.356px; top: 912.062px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.830943);">fast-starting bytecode interpreter. As the program runs, the system</span><span style="left: 528.356px; top: 928.667px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.839146);">identifies</span><span style="left: 589.498px; top: 928.816px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.787146);">hot</span><span style="left: 615.209px; top: 928.667px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.856386);">(frequently executed) bytecode sequences, records</span><span style="left: 528.356px; top: 945.271px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.875362);">them, and compiles them to fast native code. We call such a se-</span><span style="left: 528.356px; top: 961.876px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.82843);">quence of instructions a</span><span style="left: 674.447px; top: 962.025px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.858825);">trace</span><span style="left: 704.9320000000001px; top: 961.8756346666671px; font-size: 14.943999999999999px; font-family: sans-serif;">.</span><span style="left: 548.282px; top: 978.48px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.874759);">Unlike method-based dynamic compilers, our dynamic com-</span><span style="left: 528.356px; top: 995.084px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.881948);">piler operates at the granularity of individual loops. This design</span><span style="left: 528.356px; top: 1011.69px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.86319);">choice is based on the expectation that programs spend most of</span><span style="left: 528.356px; top: 1028.29px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.867508);">their time in hot loops. Even in dynamically typed languages, we</span><span style="left: 528.356px; top: 1044.9px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.809931);">expect hot loops to be mostly</span><span style="left: 704.882px; top: 1045.05px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.812679);">type-stable</span><span style="left: 770.455px; top: 1044.9px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.809153);">, meaning that the types of</span><span style="left: 528.356px; top: 1061.5px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.835008);">values are invariant. (12) For example, we would expect loop coun-</span><span style="left: 528.356px; top: 1078.11px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.828649);">ters that start as integers to remain integers for all iterations. When</span><span style="left: 528.356px; top: 1094.71px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.842749);">both of these expectations hold, a trace-based compiler can cover</span><span style="left: 528.356px; top: 1111.32px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.828247);">the program execution with a small number of type-specialized, ef-</span><span style="left: 528.356px; top: 1127.92px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.850638);">ficiently compiled traces.</span><span style="left: 548.282px; top: 1144.52px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.83276);">Each compiled trace covers one path through the program with</span><span style="left: 528.356px; top: 1161.13px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.824584);">one mapping of values to types. When the VM executes a compiled</span><span style="left: 528.356px; top: 1177.73px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.904643);">trace, it cannot guarantee that the same path will be followed</span><span style="left: 528.356px; top: 1194.34px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.885751);">or that the same types will occur in subsequent loop iterations.</span><div class="endOfContent"></div></div></div><div class="page" data-page-number="2" style="width: 1019px; height: 1319px;" data-loaded="true"><div class="canvasWrapper" style="width: 1019px; height: 1319px;"><canvas id="page2" width="2040" height="2640" style="width: 1020px; height: 1320px;"></canvas></div><div class="textLayer" style="width: 1019px; height: 1319px;"><span style="left: 90px; top: 123.151px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.824782);">Hence, recording and compiling a trace</span><span style="left: 325.768px; top: 123.301px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.832043);">speculates</span><span style="left: 391.147px; top: 123.151px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.780897);">that the path and</span><span style="left: 90px; top: 139.756px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.827557);">typing will be exactly as they were during recording for subsequent</span><span style="left: 90px; top: 156.36px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.827839);">iterations of the loop.</span><span style="left: 109.925px; top: 172.965px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.857159);">Every compiled trace contains all the</span><span style="left: 338.617px; top: 173.114px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.832604);">guards</span><span style="left: 383.838px; top: 172.965px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.852579);">(checks) required</span><span style="left: 90px; top: 189.569px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.893911);">to validate the speculation. If one of the guards fails (if control</span><span style="left: 90px; top: 206.173px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.881137);">flow is different, or a value of a different type is generated), the</span><span style="left: 90px; top: 222.778px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.893977);">trace exits. If an exit becomes hot, the VM can record a</span><span style="left: 446.618px; top: 222.927px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.847916);">branch</span><span style="left: 90px; top: 239.532px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.858825);">trace</span><span style="left: 124.159px; top: 239.382px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.834543);">starting at the exit to cover the new path. In this way, the VM</span><span style="left: 90px; top: 255.987px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.823177);">records a</span><span style="left: 148.087px; top: 256.136px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.835123);">trace tree</span><span style="left: 208.728px; top: 255.987px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.820327);">covering all the hot paths through the loop.</span><span style="left: 109.925px; top: 272.591px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.884012);">Nested loops can be difficult to optimize for tracing VMs. In</span><span style="left: 90px; top: 289.195px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.864139);">a na</span><span style="left: 115.634px; top: 289.121px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(1.12569);"> ̈</span><span style="left: 116.045px; top: 289.195px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.860766);">ıve implementation, inner loops would become hot first, and</span><span style="left: 90px; top: 305.8px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.871744);">the VM would start tracing there. When the inner loop exits, the</span><span style="left: 90px; top: 322.404px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.838545);">VM would detect that a different branch was taken. The VM would</span><span style="left: 90px; top: 339.009px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.831626);">try to record a branch trace, and find that the trace reaches not the</span><span style="left: 90px; top: 355.613px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.833276);">inner loop header, but the outer loop header. At this point, the VM</span><span style="left: 90px; top: 372.217px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.835174);">could continue tracing until it reaches the inner loop header again,</span><span style="left: 90px; top: 388.822px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.869565);">thus tracing the outer loop inside a trace tree for the inner loop.</span><span style="left: 90px; top: 405.426px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.83035);">But this requires tracing a copy of the outer loop for every side exit</span><span style="left: 90px; top: 422.031px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.860308);">and type combination in the inner loop. In essence, this is a form</span><span style="left: 90px; top: 438.635px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.849921);">of unintended tail duplication, which can easily overflow the code</span><span style="left: 90px; top: 455.239px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.836785);">cache. Alternatively, the VM could simply stop tracing, and give up</span><span style="left: 90px; top: 471.844px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.824429);">on ever tracing outer loops.</span><span style="left: 109.925px; top: 488.448px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.869446);">We solve the nested loop problem by recording</span><span style="left: 413.837px; top: 488.598px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.847472);">nested trace</span><span style="left: 90px; top: 505.202px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.811);">trees</span><span style="left: 118.497px; top: 505.053px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.825799);">. Our system traces the inner loop exactly as the na</span><span style="left: 419.111px; top: 504.978px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(1.12569);"> ̈</span><span style="left: 419.522px; top: 505.053px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.86302);">ıve version.</span><span style="left: 90px; top: 521.657px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.827871);">The system stops extending the inner tree when it reaches an outer</span><span style="left: 90px; top: 538.261px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.838224);">loop, but then it starts a new trace at the outer loop header. When</span><span style="left: 90px; top: 554.866px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.813629);">the outer loop reaches the inner loop header, the system tries to call</span><span style="left: 90px; top: 571.47px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.818862);">the trace tree for the inner loop. If the call succeeds, the VM records</span><span style="left: 90px; top: 588.075px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.896567);">the call to the inner tree as part of the outer trace and finishes</span><span style="left: 90px; top: 604.679px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.884647);">the outer trace as normal. In this way, our system can trace any</span><span style="left: 90px; top: 621.283px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.825494);">number of loops nested to any depth without causing excessive tail</span><span style="left: 90px; top: 637.888px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.846582);">duplication.</span><span style="left: 109.925px; top: 654.492px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.878535);">These techniques allow a VM to dynamically translate a pro-</span><span style="left: 90px; top: 671.097px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.874913);">gram to nested, type-specialized trace trees. Because traces can</span><span style="left: 90px; top: 687.701px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.845227);">cross function call boundaries, our techniques also achieve the ef-</span><span style="left: 90px; top: 704.305px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.834995);">fects of inlining. Because traces have no internal control-flow joins,</span><span style="left: 90px; top: 720.91px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.893853);">they can be optimized in linear time by a simple compiler (10).</span><span style="left: 90px; top: 737.514px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.891664);">Thus, our tracing VM efficiently performs the same kind of op-</span><span style="left: 90px; top: 754.119px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.861951);">timizations that would require interprocedural analysis in a static</span><span style="left: 90px; top: 770.723px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.839537);">optimization setting. This makes tracing an attractive and effective</span><span style="left: 90px; top: 787.327px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.840869);">tool to type specialize even complex function call-rich code.</span><span style="left: 109.925px; top: 803.932px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.832199);">We implemented these techniques for an existing JavaScript in-</span><span style="left: 90px; top: 820.536px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.860213);">terpreter, SpiderMonkey. We call the resulting tracing VM</span><span style="left: 449.711px; top: 820.686px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.862898);">Trace-</span><span style="left: 90px; top: 837.29px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.807686);">Monkey</span><span style="left: 136.7px; top: 837.141px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.858376);">. TraceMonkey supports all the JavaScript features of Spi-</span><span style="left: 90px; top: 853.745px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.834865);">derMonkey, with a 2x-20x speedup for traceable programs.</span><span style="left: 109.925px; top: 870.349px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.841838);">This paper makes the following contributions:</span><span style="left: 98.71716666666667px; top: 900.5702083333327px; font-size: 13.2835px; font-family: monospace;">•</span><span style="left: 111.586px; top: 901.898px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.838748);">We explain an algorithm for dynamically forming trace trees to</span><span style="left: 111.586px; top: 918.502px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.803742);">cover a program, representing nested loops as nested trace trees.</span><span style="left: 98.71716666666667px; top: 940.4207083333328px; font-size: 13.2835px; font-family: monospace;">•</span><span style="left: 111.586px; top: 941.748px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.822434);">We explain how to speculatively generate efficient type-specialized</span><span style="left: 111.586px; top: 958.353px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.830253);">code for traces from dynamic language programs.</span><span style="left: 98.71716666666667px; top: 980.2712083333328px; font-size: 13.2835px; font-family: monospace;">•</span><span style="left: 111.586px; top: 981.599px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.829657);">We validate our tracing techniques in an implementation based</span><span style="left: 111.586px; top: 998.203px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.858167);">on the SpiderMonkey JavaScript interpreter, achieving 2x-20x</span><span style="left: 111.586px; top: 1014.81px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.818353);">speedups on many programs.</span><span style="left: 109.925px; top: 1046.36px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.83268);">The remainder of this paper is organized as follows. Section 3 is</span><span style="left: 90px; top: 1062.96px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.844352);">a general overview of trace tree based compilation we use to cap-</span><span style="left: 90px; top: 1079.56px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.870216);">ture and compile frequently executed code regions. In Section 4</span><span style="left: 90px; top: 1096.17px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.854134);">we describe our approach of covering nested loops using a num-</span><span style="left: 90px; top: 1112.77px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.880171);">ber of individual trace trees. In Section 5 we describe our trace-</span><span style="left: 90px; top: 1129.38px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.83245);">compilation based speculative type specialization approach we use</span><span style="left: 90px; top: 1145.98px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.832526);">to generate efficient machine code from recorded bytecode traces.</span><span style="left: 90px; top: 1162.59px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.868639);">Our implementation of a dynamic type-specializing compiler for</span><span style="left: 90px; top: 1179.19px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.872733);">JavaScript is described in Section 6. Related work is discussed in</span><span style="left: 90px; top: 1195.8px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.833237);">Section 8. In Section 7 we evaluate our dynamic compiler based on</span><span style="left: 528.356px; top: 121.247px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">1 for (var i = 2; i &lt; 100; ++i) {</span><span style="left: 528.356px; top: 137.851px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">2   if (!primes[i])</span><span style="left: 528.356px; top: 154.456px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">3     continue;</span><span style="left: 528.356px; top: 171.06px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">4   for (var k = i + i; i &lt; 100; k += i)</span><span style="left: 528.356px; top: 187.664px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">5     primes[k] = false;</span><span style="left: 528.356px; top: 204.269px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">6 }</span><span style="left: 528.356px; top: 240.085px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.944993);">Figure 1. Sample program: sieve of Eratosthenes.</span><span style="left: 863.72px; top: 241.265px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">primes</span><span style="left: 916.894px; top: 240.264px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.915194);">is</span><span style="left: 528.356px; top: 256.868px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.888501);">initialized to an array of 100</span><span style="left: 711.081px; top: 257.87px; font-size: 14.944px; font-family: monospace; transform: scaleX(1.05028);">false</span><span style="left: 755.585px; top: 256.868px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.86464);">values on entry to this code</span><span style="left: 528.356px; top: 273.473px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.825575);">snippet.</span><span style="left: 675.67px; top: 353.54px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.694675);">Interpret</span><span style="left: 673.028px; top: 363.592px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.683652);">Bytecodes</span><span style="left: 677.353px; top: 430.369px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.677513);">Monitor</span><span style="left: 562.698px; top: 457.655px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.732079);">Record</span><span style="left: 558.861px; top: 467.707px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.749988);">LIR </span><span style="left: 574.5122468749998px; top: 467.7072037109373px; font-size: 8.616399999999999px; font-family: sans-serif;">T</span><span style="left: 579.46px; top: 467.707px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.697096);">race</span><span style="left: 788.993px; top: 523.714px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.747943);">Execute</span><span style="left: 775.343px; top: 533.766px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.657481);">Compiled </span><span style="left: 813.9819713819999px; top: 533.766270377604px; font-size: 8.616399999999999px; font-family: sans-serif;">T</span><span style="left: 818.93px; top: 533.766px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.697096);">race</span><span style="left: 794.505px; top: 457.655px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.737719);">Enter</span><span style="left: 775.343px; top: 467.707px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.657481);">Compiled </span><span style="left: 813.9819713819999px; top: 467.7072037109373px; font-size: 8.616399999999999px; font-family: sans-serif;">T</span><span style="left: 818.93px; top: 467.707px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.697096);">race</span><span style="left: 560.546px; top: 523.714px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.711722);">Compile</span><span style="left: 558.861px; top: 533.766px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.749988);">LIR </span><span style="left: 574.5122468749998px; top: 533.766270377604px; font-size: 8.616399999999999px; font-family: sans-serif;">T</span><span style="left: 579.46px; top: 533.766px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.697096);">race</span><span style="left: 793.301px; top: 589.773px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.746858);">Leave</span><span style="left: 775.343px; top: 599.825px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.657481);">Compiled </span><span style="left: 813.9819713819999px; top: 599.8253370442706px; font-size: 8.616399999999999px; font-family: sans-serif;">T</span><span style="left: 818.93px; top: 599.825px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.697096);">race</span><span style="left: 670.639px; top: 386.569px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.629689);">loop </span><span style="left: 669.2px; top: 396.622px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.661502);">edge</span><span style="left: 639.766px; top: 452.629px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.614564);">hot</span><span style="left: 629.708px; top: 462.681px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.619487);">loop/exit</span><span style="left: 558.746px; top: 426.779px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.638071);">abort </span><span style="left: 550.605px; top: 436.832px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.646401);">recording</span><span style="left: 589.261px; top: 484.94px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.585869);">fi</span><span style="left: 593.57px; top: 484.94px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.66559);">nish at </span><span style="left: 581.352px; top: 494.992px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.654134);">loop header</span><span style="left: 735.733px; top: 395.186px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.644945);">cold/blacklisted</span><span style="left: 748.902px; top: 405.238px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.619487);">loop/exit</span><span style="left: 740.522px; top: 430.369px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.656107);">compiled trace </span><span style="left: 757.762px; top: 440.422px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.672359);">ready</span><span style="left: 708.442px; top: 493.197px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.642051);">loop edge with </span><span style="left: 714.198px; top: 503.25px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.681547);">same types</span><span style="left: 864.265px; top: 571.822px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.65498);">side exit to </span><span style="left: 859.478px; top: 581.875px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.664079);">existing trace</span><span style="left: 712.404px; top: 568.232px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.676939);">side exit,</span><span style="left: 698.034px; top: 578.284px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.660311);">no existing trace</span><span style="left: 845.117px; top: 360.72px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.675925);">Overhead</span><span style="left: 842.243px; top: 382.261px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.635559);">Interpreting</span><span style="left: 851.825px; top: 403.084px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.657125);">Native</span><span style="left: 841.53px; top: 342.051px; font-size: 8.6164px; font-family: sans-serif; transform: scaleX(0.732451);">Symbol Key</span><span style="left: 528.356px; top: 654.159px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.94002);">Figure 2.</span><span style="left: 593.773px; top: 654.338px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.856679);">State machine describing the major activities of Trace-</span><span style="left: 528.356px; top: 670.942px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.860159);">Monkey and the conditions that cause transitions to a new activ-</span><span style="left: 528.356px; top: 687.547px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.911481);">ity. In the dark box, TM executes JS as compiled traces. In the</span><span style="left: 528.356px; top: 704.151px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.838532);">light gray boxes, TM executes JS in the standard interpreter. White</span><span style="left: 528.356px; top: 720.756px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.864132);">boxes are overhead. Thus, to maximize performance, we need to</span><span style="left: 528.356px; top: 737.36px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.829404);">maximize time spent in the darkest box and minimize time spent in</span><span style="left: 528.356px; top: 753.964px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.823081);">the white boxes. The best case is a loop where the types at the loop</span><span style="left: 528.356px; top: 770.569px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.825008);">edge are the same as the types on entry–then TM can stay in native</span><span style="left: 528.356px; top: 787.173px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.825808);">code until the loop is done.</span><span style="left: 528.356px; top: 834.666px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.855767);">a set of industry benchmarks. The paper ends with conclusions in</span><span style="left: 528.356px; top: 851.27px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.827419);">Section 9 and an outlook on future work is presented in Section 10.</span><span style="left: 528.356px; top: 887.804px; font-size: 18.2648px; font-family: sans-serif; transform: scaleX(0.965576);">2.  Overview: Example Tracing Run</span><span style="left: 528.356px; top: 913.521px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.89983);">This section provides an overview of our system by describing</span><span style="left: 528.356px; top: 930.125px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.885392);">how TraceMonkey executes an example program. The example</span><span style="left: 528.356px; top: 946.73px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.831297);">program, shown in Figure 1, computes the first 100 prime numbers</span><span style="left: 528.356px; top: 963.334px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.819599);">with nested loops. The narrative should be read along with Figure 2,</span><span style="left: 528.356px; top: 979.939px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.855284);">which describes the activities TraceMonkey performs and when it</span><span style="left: 528.356px; top: 996.543px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.82302);">transitions between the loops.</span><span style="left: 548.281px; top: 1013.15px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.858664);">TraceMonkey always begins executing a program in the byte-</span><span style="left: 528.356px; top: 1029.75px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.867329);">code interpreter. Every loop back edge is a potential trace point.</span><span style="left: 528.356px; top: 1046.36px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.866696);">When the interpreter crosses a loop edge, TraceMonkey invokes</span><span style="left: 528.356px; top: 1062.96px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.785728);">the</span><span style="left: 550.931px; top: 1063.11px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.843548);">trace monitor</span><span style="left: 633.056px; top: 1062.96px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.84842);">, which may decide to record or execute a native</span><span style="left: 528.356px; top: 1079.56px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.829077);">trace. At the start of execution, there are no compiled traces yet, so</span><span style="left: 528.356px; top: 1096.17px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.802761);">the trace monitor counts the number of times each loop back edge is</span><span style="left: 528.356px; top: 1112.77px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.813867);">executed until a loop becomes</span><span style="left: 710.371px; top: 1112.92px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.787146);">hot</span><span style="left: 729.47px; top: 1112.77px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.83519);">, currently after 2 crossings. Note</span><span style="left: 528.356px; top: 1129.38px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.807723);">that the way our loops are compiled, the loop edge is crossed before</span><span style="left: 528.356px; top: 1145.98px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.835404);">entering the loop, so the second crossing occurs immediately after</span><span style="left: 528.356px; top: 1162.59px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.831909);">the first iteration.</span><span style="left: 548.281px; top: 1179.19px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.90019);">Here is the sequence of events broken down by outer loop</span><span style="left: 528.356px; top: 1195.8px; font-size: 14.944px; font-family: sans-serif; transform: scaleX(0.845504);">iteration:</span><div class="endOfContent"></div></div></div><div class="page" data-page-number="3" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="4" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="5" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="6" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="7" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="8" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="9" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="10" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="11" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="12" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="13" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div><div class="page" data-page-number="14" style="width: 1019px; height: 1319px;"><div class="loadingIcon"></div></div></div>
        </div>

        <div id="errorWrapper" hidden="true">
          <div id="errorMessageLeft">
            <span id="errorMessage"></span>
            <button id="errorShowMore" data-l10n-id="error_more_info">更多信息</button>
            <button id="errorShowLess" data-l10n-id="error_less_info" hidden="true">更少信息</button>
          </div>
          <div id="errorMessageRight">
            <button id="errorClose" data-l10n-id="error_close">关闭</button>
          </div>
          <div class="clearBoth"></div>
          <textarea id="errorMoreInfo" hidden="true" readonly="readonly"></textarea>
        </div>
      </div> <!-- mainContainer -->

      <div id="overlayContainer" class="hidden">
        <div id="passwordOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <p id="passwordText" data-l10n-id="password_label">输入密码以打开此 PDF 文件。</p>
            </div>
            <div class="row">
              <input type="password" id="password" class="toolbarField">
            </div>
            <div class="buttonRow">
              <button id="passwordCancel" class="overlayButton"><span data-l10n-id="password_cancel">取消</span></button>
              <button id="passwordSubmit" class="overlayButton"><span data-l10n-id="password_ok">确定</span></button>
            </div>
          </div>
        </div>
        <div id="documentPropertiesOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <span data-l10n-id="document_properties_file_name">文件名:</span> <p id="fileNameField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_file_size">文件大小:</span> <p id="fileSizeField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_title">标题:</span> <p id="titleField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_author">作者:</span> <p id="authorField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_subject">主题:</span> <p id="subjectField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_keywords">关键词:</span> <p id="keywordsField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_creation_date">创建日期:</span> <p id="creationDateField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_modification_date">修改日期:</span> <p id="modificationDateField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_creator">创建者:</span> <p id="creatorField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_producer">PDF 生成器：</span> <p id="producerField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_version">PDF 版本:</span> <p id="versionField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_page_count">页数:</span> <p id="pageCountField">-</p>
            </div>
            <div class="row">
              <span data-l10n-id="document_properties_page_size">页面大小：</span> <p id="pageSizeField">-</p>
            </div>
            <div class="separator"></div>
            <div class="row">
              <span data-l10n-id="document_properties_linearized">快速 Web 视图：</span> <p id="linearizedField">-</p>
            </div>
            <div class="buttonRow">
              <button id="documentPropertiesClose" class="overlayButton"><span data-l10n-id="document_properties_close">关闭</span></button>
            </div>
          </div>
        </div>
        <div id="printServiceOverlay" class="container hidden">
          <div class="dialog">
            <div class="row">
              <span data-l10n-id="print_progress_message">正在准备打印文档…</span>
            </div>
            <div class="row">
              <progress value="0" max="100"></progress>
              <span data-l10n-id="print_progress_percent" data-l10n-args="{ &quot;progress&quot;: 0 }" class="relative-progress">0%</span>
            </div>
            <div class="buttonRow">
              <button id="printCancel" class="overlayButton"><span data-l10n-id="print_progress_close">取消</span></button>
            </div>
          </div>
        </div>
      </div>  <!-- overlayContainer -->

    </div> <!-- outerContainer -->
    <div id="printContainer"></div>
  


<input id="fileInput" class="fileInput" type="file"></body></html>